!function(s,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(s=s||self).Themepark=t()}(this,(function(){"use strict";function s(s){let t="";for(const e in s)t+=`--${e}:${s[e]};`;return t}return class{constructor(t,e){this.subscribers=new Map,this.params=t,this.definitions=e,this.vars=this.definitions(this.params),this.css=s(this.vars)}update(t={}){this.vars=this.definitions(Object.assign(this.params,t)),this.css=s(this.vars),this.subscribers.forEach(s=>{s.call(null,{vars:this.vars,params:this.params,css:this.css})})}subscribe(s,t=!0){let e="_"+Math.random().toString(36).substr(2,9);return this.subscribers.set(e,s),t&&this.update(),()=>this.subscribers.delete(e)}style(s){let t="string"==typeof s?()=>document.querySelectorAll(s):()=>[s];this.subscribe(({css:s})=>t().forEach(t=>{requestAnimationFrame(()=>{t.style.cssText=s})}))}}}));
