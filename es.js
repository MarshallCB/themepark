function s(s){let t="";for(const i in s)t+=`--${i}: ${s[i]};`;return t}export default class{constructor(t,i){this.subscribers=new Map,this.params=t,this.definitions=i,this.vars=this.definitions(this.params),this.css=s(this.vars)}update(t={}){this.vars=this.definitions(Object.assign(this.params,t)),this.css=s(this.vars),this.subscribers.forEach(s=>{s.call(null,this.vars)})}sub(s,t=!0){let i="_"+Math.random().toString(36).substr(2,9);return this.subscribers.set(i,s),t&&s.call(null,this.vars),i}unsub(s){this.subscribers.delete(s)}style(t){try{this.sub(i=>document.querySelectorAll(t).forEach(t=>{t.style.cssText=s(i)}))}catch(s){console.error(s)}}}
